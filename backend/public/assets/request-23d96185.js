import{_ as S,m as B,u as R,r,o as D,a as y,b as o,c as n,e,t as a,d as l,F as E,g as L,w as g,j as _,f as i,p as N,h as V}from"./index-1e35e92b.js";import{R as $}from"./RequestService-55051781.js";import{_ as j}from"./MathRenderer-93ece093.js";const w=u=>(N("data-v-f15ab664"),u=u(),V(),u),F={class:"grid"},M={class:"col-12"},T={class:"card"},z={key:0},G={class:"flex flex-row gap-2 mt-4 align-items-center"},H={key:0},J={key:1},K={key:0,class:"font-medium"},O={key:1,class:"font-medium text-xl"},P={class:"flex flex-column mt-4 align-items-center justify-center"},Q={class:"flex gap-2"},U=w(()=>e("h3",null,"답변",-1)),W={class:"grid"},X={class:"col-12"},Y={class:"card"},Z={key:0},ee=w(()=>e("br",null,null,-1)),te={key:1},se={key:0},oe={__name:"request",setup(u){const v=new $,x=B(),q=R(),d=r(x.params.requestId),s=r(null),I=localStorage.getItem("token"),m=r([]),p=r(!1);r(null);const b=async()=>{try{m.value=await v.fetchAnswers(d.value)}catch(t){console.error("Error fetching comments:",t)}},A=t=>{q.push(`/request/${t}/answer`)},C=async t=>{await v.chooseAnswer(d.value,t)};return D(async()=>{try{const t=await v.getRequestById(d.value);s.value=t}catch(t){console.error("Error fetching post:",t)}try{await b(),p.value=!!I}catch(t){console.error("Error fetching comments:",t)}}),(t,f)=>{const k=y("Divider"),h=y("Button");return o(),n("div",F,[e("div",M,[e("div",T,[s.value?(o(),n("div",z,[e("h2",null,a(s.value.title),1),e("div",null,[e("div",G,[s.value.author?(o(),n("div",H,a(s.value.author.schoolID)+" "+a(s.value.author.name)+" "+a(s.value.points)+" points",1)):(o(),n("div",J," 옛날 글 "))])]),l(k),s.value.islatex==1?(o(),n("div",K,[l(j,{content:s.value.content},null,8,["content"])])):(o(),n("div",O,a(s.value.content),1)),e("div",null,[e("div",P,[e("div",Q,[l(h,{label:t.isLiked?"좋아요 취소":"좋아요",icon:"pi pi-thumbs-up",onClick:t.handleLike},null,8,["label","onClick"])])])]),l(k),e("div",null,[U,e("div",W,[e("div",X,[(o(!0),n(E,null,L(m.value,c=>(o(),n("div",{key:c._id},[e("div",Y,[s.value.chosenAnswer==c._id?(o(),n("div",Z,[i(" 채택되었습니다! "),ee,i(" -------------------------- ")])):_("",!0),e("p",null,[e("strong",null,a(c.author.name)+":",1),i(" "+a(c.content),1)]),s.value.chosenAnswer?_("",!0):(o(),n("div",te,[l(h,{onClick:ne=>C(c._id)},{default:g(()=>[i(" 채택하기 ")]),_:2},1032,["onClick"])]))])]))),128))])]),p.value&&!s.value.chosenAnswer?(o(),n("div",se,[l(h,{onClick:f[0]||(f[0]=c=>A(d.value))},{default:g(()=>[i("답변 추가하기")]),_:1})])):_("",!0)])])):_("",!0)])])])}}},re=S(oe,[["__scopeId","data-v-f15ab664"]]);export{re as default};
