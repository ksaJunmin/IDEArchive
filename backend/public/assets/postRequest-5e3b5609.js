import{i as R,j as S,u as B,r as i,o as D,a as y,b as o,c as n,d as e,t as a,e as l,F as L,g as E,w as k,k as _,f as r,p as N,l as V}from"./index-1f07c82d.js";import{R as $}from"./RequestService-d2f4e7a5.js";import{_ as j}from"./MathRenderer-eac4ecc0.js";const h=d=>(N("data-v-ded3f793"),d=d(),V(),d),F={class:"grid"},M={class:"col-12"},T={class:"card"},z={key:0},G={class:"flex flex-row gap-2 mt-4 align-items-center"},H={class:"text-gray-500"},J={class:"surface-100 p-1",style:{"border-radius":"30px"}},K={class:"surface-0 flex align-items-center gap-2 justify-content-center py-1 px-2",style:{"border-radius":"30px","box-shadow":"0px 1px 2px 0px rgba(0, 0, 0, 0.04), 0px 1px 2px 0px rgba(0, 0, 0, 0.06)"}},O={class:"text-900 font-medium text-sm"},P=h(()=>e("i",{class:"pi pi-thumbs-up"},null,-1)),Q={key:0},U={key:1},W={key:0,class:"font-medium"},X={key:1,class:"font-medium text-xl"},Y={class:"flex flex-column mt-4 align-items-center justify-center"},Z={class:"flex gap-2"},ee=h(()=>e("h3",null,"답변",-1)),te={class:"grid"},se={class:"col-12"},oe={class:"card"},ne={key:0},ae=h(()=>e("br",null,null,-1)),ce={key:1},le={key:0},ie={__name:"postRequest",setup(d){const v=new $,w=S(),b=B(),u=i(w.params.requestId),t=i(null),q=localStorage.getItem("token"),m=i([]),f=i(!1);i(null);const I=async()=>{try{m.value=await v.fetchAnswers(u.value)}catch(s){console.error("Error fetching comments:",s)}},A=s=>{b.push(`/request/${s}/letmedo`)},C=async s=>{await v.chooseAnswer(u.value,s)};return D(async()=>{try{const s=await v.getRequestById(u.value);t.value=s}catch(s){console.error("Error fetching post:",s)}try{await I(),f.value=!!q}catch(s){console.error("Error fetching comments:",s)}}),(s,x)=>{const g=y("Divider"),p=y("Button");return o(),n("div",F,[e("div",M,[e("div",T,[t.value?(o(),n("div",z,[e("h2",null,a(t.value.title),1),e("div",null,[e("div",G,[e("div",H,a(new Date(t.value.date).toLocaleString()),1),e("div",J,[e("div",K,[e("div",O,a(t.value.like),1),P])]),t.value.author?(o(),n("div",Q,a(t.value.author.schoolID)+" "+a(t.value.author.name)+" "+a(t.value.points)+" points",1)):(o(),n("div",U," 옛날 글 "))])]),l(g),t.value.islatex==1?(o(),n("div",W,[l(j,{content:t.value.content},null,8,["content"])])):(o(),n("div",X,a(t.value.content),1)),e("div",null,[e("div",Y,[e("div",Z,[l(p,{label:s.isLiked?"좋아요 취소":"좋아요",icon:"pi pi-thumbs-up",onClick:s.handleLike},null,8,["label","onClick"])])])]),l(g),e("div",null,[ee,e("div",te,[e("div",se,[(o(!0),n(L,null,E(m.value,c=>(o(),n("div",{key:c._id},[e("div",oe,[t.value.chosenAnswer==c._id?(o(),n("div",ne,[r(" 채택되었습니다! "),ae,r(" -------------------------- ")])):_("",!0),e("p",null,[e("strong",null,a(c.author.name)+":",1),r(" "+a(c.content),1)]),t.value.chosenAnswer?_("",!0):(o(),n("div",ce,[l(p,{onClick:re=>C(c._id)},{default:k(()=>[r(" 채택하기 ")]),_:2},1032,["onClick"])]))])]))),128))])]),f.value&&!t.value.chosenAnswer?(o(),n("div",le,[l(p,{onClick:x[0]||(x[0]=c=>A(u.value))},{default:k(()=>[r("답변 추가하기")]),_:1})])):_("",!0)])])):_("",!0)])])])}}},ve=R(ie,[["__scopeId","data-v-ded3f793"]]);export{ve as default};
