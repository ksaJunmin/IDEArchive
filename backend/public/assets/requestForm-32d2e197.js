import{R as y}from"./RequestService-6bb9e417.js";import{U as I}from"./UserService-d04b6628.js";import{_ as w,r as u,u as R,o as U,a as p,b as f,c as g,e as o,d as a,t as B,j as C,p as F,h as N}from"./index-73b5ec6b.js";const i=r=>(F("data-v-6ec4777a"),r=r(),N(),r),T={class:"p-fluid"},E={class:"p-field p-grid"},M=i(()=>o("h2",null,[o("strong",null,"의뢰 작성")],-1)),D=i(()=>o("label",{for:"title"},"제목",-1)),j={class:"p-field p-grid"},P=i(()=>o("label",{for:"content"},"내용",-1)),$={class:"p-field p-grid"},z=i(()=>o("label",{for:"points"},"포인트",-1)),A={class:"button-group"},G={key:0},H={__name:"requestForm",setup(r){const s=u(null),h=R(),x=localStorage.getItem("token"),V=new y,k=new I,e=u({title:"",content:"",points:""}),q=async()=>{try{console.log(e.value.points),console.log(s.points),e.value.points>s.points?c.value=`포인트는 최대 ${s.points}까지 입력할 수 있습니다.`:(c.value="",await V.postRequest(e.value,x),d(),h.push("/board/3"))}catch(n){console.error("Error creating request: ",n.message)}},d=()=>{e.value.title="",e.value.content="",e.value.points=""},b=async()=>{const n=localStorage.getItem("token");if(n)try{const t=await k.fetchUser(n);s.value=t}catch(t){console.error("Error fetching user:",t)}else console.error("No token found")},c=u("");return U(b),(n,t)=>{var v;const _=p("InputText"),S=p("Textarea"),m=p("Button");return f(),g("div",T,[o("div",E,[M,D,a(_,{id:"title",modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.title=l),required:"",autofocus:""},null,8,["modelValue"])]),o("div",j,[P,a(S,{modelValue:e.value.content,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.content=l),id:"content",required:"",rows:"12",cols:"120",class:"full"},null,8,["modelValue"])]),o("div",$,[z,a(_,{type:"number",id:"points",min:"1",max:(v=s.value)==null?void 0:v.points,modelValue:e.value.points,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.points=l),modelModifiers:{number:!0}},null,8,["max","modelValue"])]),o("div",A,[a(m,{label:"취소",icon:"pi pi-times",text:"",onClick:d}),a(m,{label:"저장",icon:"pi pi-check",text:"",onClick:q})]),c.value?(f(),g("p",G,B(c.value),1)):C("",!0)])}}},O=w(H,[["__scopeId","data-v-6ec4777a"]]);export{O as default};
