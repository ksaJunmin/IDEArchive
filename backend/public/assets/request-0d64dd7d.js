import{_ as S,m as B,u as D,r,o as L,a as y,b as o,c as n,e,t as c,d as l,F as R,g as E,w as k,j as _,f as i,p as N,h as V}from"./index-b933d539.js";import{R as $}from"./RequestService-54d84e17.js";import{_ as j}from"./MathRenderer-eadcf6c9.js";const p=d=>(N("data-v-c187c48f"),d=d(),V(),d),F={class:"grid"},M={class:"col-12"},T={class:"card"},z={key:0},G={class:"flex flex-row gap-2 mt-4 align-items-center"},H={class:"text-gray-500"},J={class:"surface-100 p-1",style:{"border-radius":"30px"}},K={class:"surface-0 flex align-items-center gap-2 justify-content-center py-1 px-2",style:{"border-radius":"30px","box-shadow":"0px 1px 2px 0px rgba(0, 0, 0, 0.04), 0px 1px 2px 0px rgba(0, 0, 0, 0.06)"}},O={class:"text-900 font-medium text-sm"},P=p(()=>e("i",{class:"pi pi-thumbs-up"},null,-1)),Q={key:0},U={key:1},W={key:0,class:"font-medium"},X={key:1,class:"font-medium text-xl"},Y={class:"flex flex-column mt-4 align-items-center justify-center"},Z={class:"flex gap-2"},ee=p(()=>e("h3",null,"답변",-1)),te={class:"grid"},se={class:"col-12"},oe={class:"card"},ne={key:0},ce=p(()=>e("br",null,null,-1)),ae={key:1},le={key:0},re={__name:"request",setup(d){const v=new $,w=B(),b=D(),u=r(w.params.requestId),t=r(null),q=localStorage.getItem("token"),m=r([]),f=r(!1);r(null);const I=async()=>{try{m.value=await v.fetchAnswers(u.value)}catch(s){console.error("Error fetching comments:",s)}},A=s=>{b.push(`/request/${s}/answer`)},C=async s=>{await v.chooseAnswer(u.value,s)};return L(async()=>{try{const s=await v.getRequestById(u.value);t.value=s}catch(s){console.error("Error fetching post:",s)}try{await I(),f.value=!!q}catch(s){console.error("Error fetching comments:",s)}}),(s,x)=>{const g=y("Divider"),h=y("Button");return o(),n("div",F,[e("div",M,[e("div",T,[t.value?(o(),n("div",z,[e("h2",null,c(t.value.title),1),e("div",null,[e("div",G,[e("div",H,c(new Date(t.value.date).toLocaleString()),1),e("div",J,[e("div",K,[e("div",O,c(t.value.like),1),P])]),t.value.author?(o(),n("div",Q,c(t.value.author.schoolID)+" "+c(t.value.author.name)+" "+c(t.value.points)+" points",1)):(o(),n("div",U," 옛날 글 "))])]),l(g),t.value.islatex==1?(o(),n("div",W,[l(j,{content:t.value.content},null,8,["content"])])):(o(),n("div",X,c(t.value.content),1)),e("div",null,[e("div",Y,[e("div",Z,[l(h,{label:s.isLiked?"좋아요 취소":"좋아요",icon:"pi pi-thumbs-up",onClick:s.handleLike},null,8,["label","onClick"])])])]),l(g),e("div",null,[ee,e("div",te,[e("div",se,[(o(!0),n(R,null,E(m.value,a=>(o(),n("div",{key:a._id},[e("div",oe,[t.value.chosenAnswer==a._id?(o(),n("div",ne,[i(" 채택되었습니다! "),ce,i(" -------------------------- ")])):_("",!0),e("p",null,[e("strong",null,c(a.author.name)+":",1),i(" "+c(a.content),1)]),t.value.chosenAnswer?_("",!0):(o(),n("div",ae,[l(h,{onClick:ie=>C(a._id)},{default:k(()=>[i(" 채택하기 ")]),_:2},1032,["onClick"])]))])]))),128))])]),f.value&&!t.value.chosenAnswer?(o(),n("div",le,[l(h,{onClick:x[0]||(x[0]=a=>A(u.value))},{default:k(()=>[i("답변 추가하기")]),_:1})])):_("",!0)])])):_("",!0)])])])}}},ve=S(re,[["__scopeId","data-v-c187c48f"]]);export{ve as default};
