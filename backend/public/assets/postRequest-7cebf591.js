import{_ as C,i as B,u as L,r as i,o as D,a as k,b as o,c as n,d as e,t as a,e as r,F as E,g as N,w,j as v,f as d,p as V,k as $}from"./index-9f4cf9f0.js";import{R as j}from"./RequestService-2f98bcfc.js";import{_ as F}from"./MathRenderer-355883fb.js";const h=u=>(V("data-v-2ca8ead0"),u=u(),$(),u),M={class:"grid"},T={class:"col-12"},z={class:"card"},G={key:0},H={class:"flex flex-row gap-2 mt-4 align-items-center"},J={class:"text-gray-500"},K={class:"surface-100 p-1",style:{"border-radius":"30px"}},O={class:"surface-0 flex align-items-center gap-2 justify-content-center py-1 px-2",style:{"border-radius":"30px","box-shadow":"0px 1px 2px 0px rgba(0, 0, 0, 0.04), 0px 1px 2px 0px rgba(0, 0, 0, 0.06)"}},P={class:"text-900 font-medium text-sm"},Q=h(()=>e("i",{class:"pi pi-thumbs-up"},null,-1)),U={key:0},W={key:1},X={key:0,class:"font-medium"},Y={key:1,class:"font-medium text-xl"},Z={class:"flex flex-column mt-4 align-items-center justify-center"},ee={class:"flex gap-2"},te=h(()=>e("h3",null,"답변",-1)),se={class:"grid"},oe={class:"col-12"},ne={class:"card"},ae={key:0},ce=h(()=>e("br",null,null,-1)),re={key:1},le={key:0},ie={__name:"postRequest",setup(u){const _=new j,b=B(),q=L(),l=i(b.params.requestId),s=i(null),m=localStorage.getItem("token"),I=async()=>{try{const t=await _.updateLike(m,l.value);s.value=t}catch(t){console.error("Error updating like:",t)}},f=i([]),x=i(!1);i(null);const R=async()=>{try{f.value=await _.fetchAnswers(l.value)}catch(t){console.error("Error fetching comments:",t)}},A=t=>{q.push(`/request/${t}/letmedo`)},S=async t=>{await _.chooseAnswer(l.value,t)};return D(async()=>{try{const t=await _.getRequestById(l.value);s.value=t}catch(t){console.error("Error fetching post:",t)}try{await R(),x.value=!!m}catch(t){console.error("Error fetching comments:",t)}}),(t,y)=>{const g=k("Divider"),p=k("Button");return o(),n("div",M,[e("div",T,[e("div",z,[s.value?(o(),n("div",G,[e("h2",null,a(s.value.title),1),e("div",null,[e("div",H,[e("div",J,a(new Date(s.value.date).toLocaleString()),1),e("div",K,[e("div",O,[e("div",P,a(s.value.like),1),Q])]),s.value.author?(o(),n("div",U,a(s.value.author.schoolID)+" "+a(s.value.author.name)+" "+a(s.value.points)+" points",1)):(o(),n("div",W," 옛날 글 "))])]),r(g),s.value.islatex==1?(o(),n("div",X,[r(F,{content:s.value.content},null,8,["content"])])):(o(),n("div",Y,a(s.value.content),1)),e("div",null,[e("div",Z,[e("div",ee,[r(p,{label:t.isLiked?"좋아요 취소":"좋아요",icon:"pi pi-thumbs-up",onClick:I},null,8,["label"])])])]),r(g),e("div",null,[te,e("div",se,[e("div",oe,[(o(!0),n(E,null,N(f.value,c=>(o(),n("div",{key:c._id},[e("div",ne,[s.value.chosenAnswer==c._id?(o(),n("div",ae,[d(" 채택되었습니다! "),ce,d(" -------------------------- ")])):v("",!0),e("p",null,[e("strong",null,a(c.author.name)+":",1),d(" "+a(c.content),1)]),s.value.chosenAnswer?v("",!0):(o(),n("div",re,[r(p,{onClick:de=>S(c._id)},{default:w(()=>[d(" 채택하기 ")]),_:2},1032,["onClick"])]))])]))),128))])]),x.value&&!s.value.chosenAnswer?(o(),n("div",le,[r(p,{onClick:y[0]||(y[0]=c=>A(l.value))},{default:w(()=>[d("답변 추가하기")]),_:1})])):v("",!0)])])):v("",!0)])])])}}},pe=C(ie,[["__scopeId","data-v-2ca8ead0"]]);export{pe as default};
